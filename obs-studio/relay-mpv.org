#+STARTUP: show2levels
#+PROPERTY: header-args:sh :async t :results none
* relay-mpv
** set up
*** resources

relay-mpv

[[https://github.com/NapoleonWils0n/rust-scripts]]

obs-cmd

https://github.com/grigio/obs-cmd

*** obs studio set up
**** media source set up

Add a media source to a scene and add change the following settings

1) uncheck local file

2) make sure restart playback is checked

3) set network buffering to 0

4) under input add

#+begin_example
/tmp/relay
#+end_example

5) set reconnect delay to its lowest setting

6) make sure the following check boxes are checked

#+begin_example
use hardware decoding when available

show nothing when playback ends

close the file when inactive
#+end_example

**** media source audio properties

1) select the media source and then click on the media source audio track

2) click the 3 dots on the media source audio track, and from the pop up menu select Advanced Audio Properties

3) in the Advanced Audio Properties window

set Desktop Audio to Monitor Off

and the media source audio settings to Monitor Only (mute output)

This will allow you to monitor the audio from media source and record it with desktop audio

** obs-cmd
*** emacs doom modeline

doom modeline now playing hangs when using obs-cmd pause

Run this BEFORE starting a relay to prevent Emacs from hanging

#+begin_src emacs-lisp :results silent
(setq doom-modeline-now-playing nil)
(doom-modeline-update-now-playing)
#+end_src

Run this to turn it back on after your stream

#+begin_src emacs-lisp :results silent
(setq doom-modeline-now-playing t)
(doom-modeline-update-now-playing)
#+end_src

*** switch scene

Laptop

#+begin_src sh
obs-cmd scene switch "laptop"
#+end_src

Monitor

#+begin_src sh
obs-cmd scene switch "monitor"
#+end_src

Media

#+begin_src sh
obs-cmd scene switch "media"
#+end_src

Both screens

#+begin_src sh
obs-cmd scene switch "both"
#+end_src

*** media source

Pause media source

#+begin_src sh
obs-cmd media-input pause "relay"
#+end_src

Play media source

#+begin_src sh
obs-cmd media-input play "relay"
#+end_src

Stop media source

#+begin_src sh
obs-cmd media-input stop "relay"
#+end_src

** clips
*** Big Buck Bunny

#+begin_src sh
relay-mpv -i 'https://www.youtube.com/watch?v=YE7VzlLtp-4' -s 00:00:00 -e 00:00:20
#+end_src

