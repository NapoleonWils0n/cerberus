#+STARTUP: content
* tampermonkey

[[https://www.tampermonkey.net/][tampermonkey]]

[[https://superuser.com/questions/1595367/how-to-block-the-annoying-before-you-continue-popup-on-google][tampermonkey superuser]]

** youtube

#+begin_src javascript
// ==UserScript==
// @name         avoid youtube "before you continue"
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  How to block the annoying “Before you continue” popup on youtube
// @author       NapoleonWils0n
// @match        https://www.youtube.com/*
// @grant        none
// @run-at       document-start
// ==/UserScript==

// modified Jonas google script
// This will remove the popup but there are some problems:
const style = document.createElement('style');
style.innerHTML = /* css */ `
  div[dialog] {
    display: none !important;
  }
`;
document.head.append(style);

// This solves the previous problems but it's probably not that great for privacy
const consentMatch = document.cookie.match(/CONSENT=(PENDING|YES)\+(\d+)/);
document.cookie=`CONSENT=YES+${consentMatch ? consentMatch[2] : '0'}; domain=.youtube.com`;
#+end_src

** google

#+begin_src javascript
// ==UserScript==
// @name         avoid Google's "before you continue"
// @namespace    http://tampermonkey.net/
// @version      0.2
// @description  How to block the annoying “Before you continue” popup on Google?
// @author       jonas
// @match        https://www.google.com/*
// @grant        none
// @run-at       document-start
// ==/UserScript==

// This will remove the popup but there are some problems:
// Buttons and menus like 'More', 'Tools', and many others will not work
const style = document.createElement('style');
style.innerHTML = /* css */ `
  div[aria-modal] {
    display: none !important;
  }
`;
document.head.append(style);

// This solves the previous problems but it's probably not that great for privacy
const consentMatch = document.cookie.match(/CONSENT=(PENDING|YES)\+(\d+)/);
document.cookie=`CONSENT=YES+${consentMatch ? consentMatch[2] : '0'}; domain=.google.com`;
#+end_src
